{% extends "elections/embeded/base_embed.html" %}
{% load i18n %}
{% load election_tags %}
{% load candidate_tags %}
{% load thumbnail %}

{% block extra_head %}
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/style.css">
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/profile.css">
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/style-embed.css">
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/media-queries.css">
{% endblock extra_head %}

{% block extra_js %}
<script type="text/javascript" src="{{ STATIC_URL }}/js/accordionForProfiles.js"></script>
<script type="text/javascript" src="https://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4e7a236a4a5434b2"></script>
<script type="text/javascript">var switchTo5x=true;</script>
    <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
    <script type="text/javascript">stLight.options({publisher: "c15a8159-e3a6-4b10-bbee-a24ca6aa70f7"}); </script>
{% endblock extra_js %}

{% block title %}
   {% trans 'Perfil' %} {{ candidate.name }}, {{ election.name }} - {{ block.super }}
{% endblock title %}

{% block content %}
    <div class="contenedor1_embeded">
        <div class="contenedor2_embeded">

                    <div class="candidatesBasicInformation wrapW">


                        <header>
                            <div class="tit"><h3>{{ candidate.name }}
                            {% if election.owner.username == request.user.username %}

                            <span class="goedit"><a href="{% url candidate_data_update election_slug=election.slug slug=candidate.slug%}">{% trans "editar respuestas" %}</a></span>

                            {% endif %}</h3></div>
                        </header>

                        <div>
                            <div class="profileImg">
                                {% thumbnail candidate.photo "160x200" crop="center" as im %}
                                    <img src="{{ im.url }}" alt="{{ candidate.name }}" style="margin: {{ im|margin:"160x200" }}"
                                         width="160" height="200"/>
                                {% empty %}
                                    {% if candidate.photo %}
                                    <img src="{{ candidate.photo.url }}" alt="{{ candidate.name }}" width="160" height="200"/>
                                    {% else %}
                                    <img src="{{ STATIC_URL }}img/default-user.gif" alt="{{ candidate.name }}" width="160" height="200"/>
                                    {% endif %}
                                {% endthumbnail %}
                            </div>

                            <section class="personalInfo">
                                <h3 style="display:none;">{% trans "Información personal" %}</h3>


                                {% for personal_data_label, personal_data_value in candidate.get_personal_data.items %}
                                    <span class="profile-description">{{ personal_data_label }}:</span>
                                    {% if personal_data_value %}
                                        <span> {{ personal_data_value }}</span>
                                    {% else %}
                                        <span></span>
                                    {% endif %}
                                    <br>
                                {% endfor %}


                            </section>
                            
                 <aside class="profileAside">
                            <div class="sideButton compare"><a href="{% url election_compare_one_candidate_embeded first_candidate_slug=candidate.slug slug=candidate.election.slug username=candidate.election.owner.username %}">{% trans "Compara" %}</a></div>
                            <div class="sideButton medianaranja"><a href="{% url medianaranja1_embeded election_slug=candidate.election.slug username=candidate.election.owner.username %}">Media<wbr /> Naranja</a></div>
        
                    
                </aside>
                           
                            <section class="enlacesPersonales">
                                <h3 style="display:none;">{% trans "Enlaces personales" %}:</h3>
                                <ul class="ulEnlacesPersonales">
                                    {% for link in candidate.link_set.all %}
                                    <li class="{{ link.css_class }}"><a target="_blank" href="{{ link.http_prefix }}">{{ link.name }}</a></li>
                                    {% endfor %}
                                </ul>
                            </section>
                        </div>
                    </div>
                    <!--ends candidate basic information-->
    </div>
        </div>


    <div class="contenedor3_embeded"><h3 style="float: left; width: 35%; padding-left: 13px;">{% trans "Antecedentes" %}:</h3><h3 style="float: left; width: 60%; padding-left: 13px;">{% trans "Posición política en" %}: </h3></div>
    <div class="contenedor1_embeded">
            <div class="contenedor2_embeded">

                        <section class="trayectoria">


                            <div class="brdotted">
                                <div class="accordion">
				{% if candidate.get_background.items %}
                                    {% for background_category, background_items in candidate.get_background.items %}
                                    <h3>{{ background_category }}: </h3>

                                    <div class="accordionContent">
                                        {% for background_label, background_value in background_items.items %}
                                        <span class="profile-description">{{ background_label }}: </span>{% if background_value %}{{ background_value }}{% endif %}<br>
                                        {% endfor %}
                                    </div>
                                    {% endfor %}
				{% else %}
                                    <span class="profile-description">{% trans 'No hay antecedentes disponibles.' %}</span><br>
				{% endif %}
                                </div>
                                <!--ends accordion-->
                            </div>
                            <!--ends brdotted-->
                        </section>
                        <!--ends trayectoria-->

                        <section class="posiciones">



                            <div class="accordion">
			    {% if candidate.election.category_set.all %}

                                {% for category in candidate.election.category_set.all %}
                                <div class="category">
                                    <h3>{{ category.name }}</h3>
                                    <div class="accordionContent">
                                        {% for question in category.question_set.all %}
                                        <span class="profile-description">{{ question.question }}</span>
                                        <div class="answerContainer">
                                            <span style="opacity:1;" class="answer">
                                                {% answer_for_candidate_and_question candidate question %}
                                            </span>
                                            <br>
                                        </div>
                                        {% endfor %}
                                    </div>
                                    <!--ends accordionContent-->
                                </div>
                                <!--ends category-->
                                {% endfor %}{# end category_set #}

                            {% else %}
                                 <span class="profile-description">{% trans 'No hay información disponible.' %}</span><br>
                            {% endif %}
                            </div>
                            <!-- ends accordion-->
                        </section>
                        <!--ends posiciones-->



        </div>
    </div>

{% endblock content %}
